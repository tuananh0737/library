<div class="page-container">
  <div class="section-header">
    <h2><i class="bi bi-heart-fill text-danger me-2"></i>Tủ sách yêu thích</h2>
  </div>

  <div *ngIf="errorMessage" class="alert alert-danger">
    <i class="bi bi-exclamation-triangle-fill me-2"></i> {{ errorMessage }}
  </div>

  <div class="book-list" *ngIf="bookmarks && bookmarks.length > 0">
    <div *ngFor="let item of bookmarks" class="book-item">
      <div class="book-info">
        <h3>{{ item.book.name }}</h3>
        <div class="meta-row">
          <span><i class="bi bi-person-fill"></i> {{ item.book.author.fullname }}</span>
          <span><i class="bi bi-tag-fill"></i> {{ item.book.genres.name?.trim() }}</span>
          <span><i class="bi bi-calendar-event"></i> {{ item.book.publishYear }}</span>
        </div>
      </div>
      
      <div class="actions">
        <button class="btn-delete" (click)="openDeleteOverlay(item)" title="Xóa khỏi yêu thích">
          <i class="bi bi-trash"></i>
        </button>
      </div>
    </div>
  </div>

  <div *ngIf="bookmarks && bookmarks.length === 0" class="text-center py-5 text-muted">
    <i class="bi bi-journal-bookmark" style="font-size: 48px;"></i>
    <p class="mt-3">Bạn chưa có cuốn sách yêu thích nào.</p>
  </div>
</div>

<div *ngIf="isDeleteOverlayVisible" class="overlay">
  <div class="overlay-content">
    <h4 class="mb-3">Xác nhận xóa</h4>
    <p class="mb-4">Bạn có chắc chắn muốn xóa <strong>{{ selectedBookmark?.book.name }}</strong>?</p>
    <div class="d-flex justify-content-center gap-2">
      <button class="btn btn-secondary px-4" (click)="closeDeleteOverlay()">Hủy</button>
      <button class="btn btn-danger px-4" (click)="deleteBook(selectedBookmark?.id)">Xóa</button>
    </div>
  </div>
</div>